<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">

	<title>008 - movement</title>

	<style>
		body { margin: 0; }
		canvas { width: 100%; height: 100%; }
	</style>
</head>
<body>
	<script src="three.js"></script>
	<script>
		
        var scene, camera, renderer;
        var cube;

        init();
        animate();

        function init()
        {
            scene = new THREE.Scene();

            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 500);
            camera.position.set(0, 0, 10);
            camera.lookAt(0, 0, 0);

            renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setClearColor(0xefb521, 1);
            document.body.appendChild(renderer.domElement);

            var geom = new THREE.BoxGeometry(4, 4, 4);
            var material = new THREE.MeshBasicMaterial({color: 0xef4e21});
            cube = new THREE.Mesh(geom, material);
            scene.add(cube);
        }

        function animate()
        {
            requestAnimationFrame(animate);

            cube.rotation.x += 0.01;
            cube.rotation.y += 0.01;
            cube.rotation.z += 0.01;
            moveCube();

            renderer.render(scene, camera);
        }

        function moveCube()
        {
            var moveAmount = 0.025;
            var distRight = Math.abs(10 - cube.position.x);
            var distLeft = Math.abs(-10 - cube.position.x);

            if (distLeft < .2 || distRight < .2) // TODO
            {
                moveAmount *= -1;
                console.log(distRight + " " + cube.position.x);
            }
            else
                cube.position.x += moveAmount;
        }

	</script>
</body>
</html>